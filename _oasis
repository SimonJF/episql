OASISFormat: 0.4
Name: episql
Version: 0.8.7
Synopsis: Tool to derive code from SQL schemas
Authors: Petter A. Urkedal
License: LGPL-3
AlphaFeatures: pure_interface
Plugins: DevFiles (0.4), META (0.4)
BuildTools: ocamlbuild

Flag caqti_persist
  Description: Build caqti-persist library and code generator.
  Default: true

Flag macaque
  Description: Add test for Macaque.
  Default: true

Library "episql"
  Path: lib
  InternalModules: Episql_lexer, Episql_parser
  BuildDepends: prime, xmlm
  Modules:
    Episql,
    Episql_to_caqti_persist,
    Episql_to_macaque,
    Episql_to_shell,
    Episql_to_xml,
    Episql_types

Library "caqti-persist"
  Path: lib
  FindlibParent: episql
  FindlibName: caqti-persist
  BuildDepends: caqti.lwt, extunix, lwt, prime, prime.unstable, react
  Modules: Caqti_persist
  ByteOpt: -thread
  NativeOpt: -thread
  Build$: flag(caqti_persist)
  Install$: flag(caqti_persist)

Executable "episql"
  Path: bin
  MainIs: episql_main.ml
  BuildDepends: episql, prime, re, re.glob
  CompiledObject: best
  ByteOpt: -linkall
  NativeOpt: -linkall

Executable "test_caqti_persist"
  Path: tests
  MainIs: test_caqti_persist.ml
  BuildDepends: caqti.lwt, episql.caqti-persist, prime.unstable, react
  CompiledObject: best
  ByteOpt: -thread
  NativeOpt: -thread
  Build$: flag(tests) && flag(caqti_persist)
  Install: false

Executable "test_macaque"
  Path: tests
  MainIs: schema_one_macaque.ml
  BuildDepends: macaque
  CompiledObject: best
  Build$: flag(tests) && flag(macaque)
  Install: false

Document api
  Title: Episql API Reference
  Type: ocamlbuild (0.4)
  InstallDir: $htmldir/html
  BuildTools+: ocamldoc
  XOCamlbuildPath: lib
  XOCamlbuildLibraries: episql
  DataFiles: COPYING ($docdir), COPYING.LESSER ($docdir)
